{"version":3,"names":[],"mappings":"","sources":["components/forms/wizard/wizard.js"],"sourcesContent":["//== Class definition\r\nvar WizardDemo = function () {\r\n    //== Base elements\r\n    var wizardEl = $('#m_wizard');\r\n    var formEl = $('#m_form');\r\n    var validator;\r\n    var wizard;\r\n    \r\n    //== Private functions\r\n    var initWizard = function () {\r\n        //== Initialize form wizard\r\n        wizard = wizardEl.mWizard({\r\n            startStep: 1\r\n        });\r\n\r\n        //== Validation before going to next page\r\n        wizard.on('beforeNext', function(wizard) {\r\n            if (validator.form() !== true) {\r\n                return false;  // don't go to the next step\r\n            }\r\n        })\r\n\r\n        //== Change event\r\n        wizard.on('change', function(wizard) {\r\n            mApp.scrollTop();\r\n        });\r\n    }\r\n\r\n    var initValidation = function() {\r\n        validator = formEl.validate({\r\n            //== Validate only visible fields\r\n            ignore: \":hidden\",\r\n\r\n            //== Validation rules\r\n            rules: {\r\n                //=== Client Information(step 1)\r\n                //== Client details\r\n                name: {\r\n                    required: true \r\n                },\r\n                email: {\r\n                    required: true,\r\n                    email: true \r\n                },       \r\n                phone: {\r\n                    required: true,\r\n                    phoneUS: true \r\n                },     \r\n\r\n                //== Mailing address\r\n                address1: {\r\n                    required: true \r\n                },\r\n                city: {\r\n                    required: true \r\n                },\r\n                state: {\r\n                    required: true \r\n                },\r\n                city: {\r\n                    required: true \r\n                },\r\n                country: {\r\n                    required: true \r\n                },\r\n\r\n                //=== Client Information(step 2)\r\n                //== Account Details\r\n                account_url: {\r\n                    required: true,\r\n                    url: true\r\n                },\r\n                account_username: {\r\n                    required: true,\r\n                    minlength: 4\r\n                },\r\n                account_password: {\r\n                    required: true,\r\n                    minlength: 6\r\n                },                \r\n\r\n                //== Client Settings\r\n                account_group: {\r\n                     required: true\r\n                },                \r\n                'account_communication[]': {\r\n                    required: true\r\n                },\r\n\r\n                //=== Client Information(step 3)\r\n                //== Billing Information\r\n                billing_card_name: {\r\n                    required: true\r\n                },\r\n                billing_card_number: {\r\n                    required: true,\r\n                    creditcard: true\r\n                },\r\n                billing_card_exp_month: {\r\n                    required: true\r\n                },\r\n                billing_card_exp_year: {\r\n                    required: true\r\n                },\r\n                billing_card_cvv: {\r\n                    required: true,\r\n                    minlength: 2,\r\n                    maxlength: 3\r\n                },\r\n\r\n                //== Billing Address\r\n                billing_address_1: {\r\n                    required: true\r\n                },\r\n                billing_address_2: {\r\n                    \r\n                },\r\n                billing_city: {\r\n                    required: true\r\n                },\r\n                billing_state: {\r\n                    required: true\r\n                },\r\n                billing_zip: {\r\n                    required: true,\r\n                    number: true\r\n                },\r\n                billing_delivery: {\r\n                    required: true\r\n                },\r\n\r\n                //=== Confirmation(step 4)\r\n                accept: {\r\n                    required: true\r\n                }\r\n            },\r\n\r\n            //== Validation messages\r\n            messages: {\r\n                'account_communication[]': {\r\n                    required: 'You must select at least one communication option'\r\n                },\r\n                accept: {\r\n                    required: \"You must accept the Terms and Conditions agreement!\"\r\n                } \r\n            },\r\n            \r\n            //== Display error  \r\n            invalidHandler: function(event, validator) {     \r\n                mApp.scrollTop();\r\n\r\n                swal({\r\n                    \"title\": \"\", \r\n                    \"text\": \"There are some errors in your submission. Please correct them.\", \r\n                    \"type\": \"error\",\r\n                    \"confirmButtonClass\": \"btn btn-secondary m-btn m-btn--wide\"\r\n                });\r\n            },\r\n\r\n            //== Submit valid form\r\n            submitHandler: function (form) {\r\n                \r\n            }\r\n        });   \r\n    }\r\n\r\n    var initSubmit = function() {\r\n        var btn = formEl.find('[data-wizard-action=\"submit\"]');\r\n\r\n        btn.on('click', function(e) {\r\n            e.preventDefault();\r\n\r\n            if (validator.form()) {\r\n                //== See: src\\js\\framework\\base\\app.js\r\n                mApp.progress(btn);\r\n                //mApp.block(formEl); \r\n\r\n                //== See: http://malsup.com/jquery/form/#ajaxSubmit\r\n                formEl.ajaxSubmit({\r\n                    success: function() {\r\n                        mApp.unprogress(btn);\r\n                        //mApp.unblock(formEl);\r\n\r\n                        swal({\r\n                            \"title\": \"\", \r\n                            \"text\": \"The application has been successfully submitted!\", \r\n                            \"type\": \"success\",\r\n                            \"confirmButtonClass\": \"btn btn-secondary m-btn m-btn--wide\"\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    return {\r\n        // public functions\r\n        init: function() {\r\n            wizardEl = $('#m_wizard');\r\n            formEl = $('#m_form');\r\n\r\n            initWizard(); \r\n            initValidation();\r\n            initSubmit();\r\n        }\r\n    };\r\n}();\r\n\r\njQuery(document).ready(function() {    \r\n    WizardDemo.init();\r\n});"],"file":"wizard.js"}